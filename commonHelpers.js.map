{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst lightbox = new SimpleLightbox('.js-list a', {\n    captionDelay: 250,\n    captionsData: 'alt',\n    close: true,\n    enableKeyboard: true,\n    docClose: true,\n});\n\n\nconst form = document.querySelector(\".js-form\");\nform.addEventListener(\"submit\", onSearch);\nconst list = document.querySelector(\".js-list\");\nconst loader = document.querySelector(\".loader\");\n\n\nfunction onSearch(evt) {\n    evt.preventDefault();\n    const wordForSearch = encodeURIComponent(evt.currentTarget.elements.input.value);\n    \n    getPhoto(wordForSearch).then(data => {\n        if (!data.total) {\n            iziToast.error({\n                position:'topRight',\n                message: 'Sorry, there are no images matching your search query. Please try again!'\n            })\n            form.reset()\n        }\n        loader.style.display = 'none';\n        list.innerHTML = createMarkup(data.hits);\n        lightbox.refresh();\n    })\n    .catch(err =>  iziToast.error({\n                position:'topRight',\n                message: `\"${err}\"`\n            }))\n};\n\n\nfunction getPhoto(wordForSearch) {\n    const API_KEY = \"41617344-22077a3acba128accdfbcd745\";\n    const BASE_URL = \"https://pixabay.com/api/\";\n    loader.style.display = 'block';\n    return fetch(`${BASE_URL}?key=${API_KEY}&q=${wordForSearch}&image_type=photo&orientation=horizontal&safesearch=true`).\n        then(resp => {\n            if (!resp.ok) {\n                throw new Error(resp.statusText)\n            }\n            return resp.json()\n        }) \n};\n\n\nfunction createMarkup(arr) {\n    return arr.map(({webformatURL,largeImageURL,tags,likes,views,comments,downloads}) =>` <li>\n    <a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\" width=\"350px\" height=\"250px\"></a>\n    <ul class=\"discription-list\">\n    <li class=\"discription-item\">\n        <h2>Likes</h2>\n        <p>${likes}</p></li>\n    <li class=\"discription-item\">\n        <h2>Views</h2>\n        <p>${views}</p>\n    </li>\n    <li class=\"discription-item\">\n        <h2>Comments</h2>\n        <p>${comments}</p>\n    </li>\n    <li class=\"discription-item\">\n        <h2>Download</h2>\n        <p>${downloads}</p>\n    </li>\n    </ul>\n    </li>`\n    ).join('');\n};"],"names":["lightbox","SimpleLightbox","form","onSearch","list","loader","evt","wordForSearch","getPhoto","data","iziToast","createMarkup","err","API_KEY","BASE_URL","resp","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"6vBAMA,MAAMA,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,IACd,aAAc,MACd,MAAO,GACP,eAAgB,GAChB,SAAU,EACd,CAAC,EAGKC,EAAO,SAAS,cAAc,UAAU,EAC9CA,EAAK,iBAAiB,SAAUC,CAAQ,EACxC,MAAMC,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAS,SAAS,cAAc,SAAS,EAG/C,SAASF,EAASG,EAAK,CACnBA,EAAI,eAAc,EAClB,MAAMC,EAAgB,mBAAmBD,EAAI,cAAc,SAAS,MAAM,KAAK,EAE/EE,EAASD,CAAa,EAAE,KAAKE,GAAQ,CAC5BA,EAAK,QACNC,EAAS,MAAM,CACX,SAAS,WACT,QAAS,0EACzB,CAAa,EACDR,EAAK,MAAO,GAEhBG,EAAO,MAAM,QAAU,OACvBD,EAAK,UAAYO,EAAaF,EAAK,IAAI,EACvCT,EAAS,QAAO,CACxB,CAAK,EACA,MAAMY,GAAQF,EAAS,MAAM,CAClB,SAAS,WACT,QAAS,IAAIE,IAC7B,CAAa,CAAC,CACd,CAGA,SAASJ,EAASD,EAAe,CAC7B,MAAMM,EAAU,qCACVC,EAAW,2BACjB,OAAAT,EAAO,MAAM,QAAU,QAChB,MAAM,GAAGS,SAAgBD,OAAaN,2DAAuE,EAChH,KAAKQ,GAAQ,CACT,GAAI,CAACA,EAAK,GACN,MAAM,IAAI,MAAMA,EAAK,UAAU,EAEnC,OAAOA,EAAK,KAAM,CAC9B,CAAS,CACT,CAGA,SAASJ,EAAaK,EAAK,CACvB,OAAOA,EAAI,IAAI,CAAC,CAAC,aAAAC,EAAa,cAAAC,EAAc,KAAAC,EAAK,MAAAC,EAAM,MAAAC,EAAM,SAAAC,EAAS,UAAAC,CAAS,IAAK;AAAA,eACzEL,gBAA4BD,WAAsBE;AAAA;AAAA;AAAA;AAAA,aAIpDC;AAAA;AAAA;AAAA,aAGAC;AAAA;AAAA;AAAA;AAAA,aAIAC;AAAA;AAAA;AAAA;AAAA,aAIAC;AAAA;AAAA;AAAA,UAIb,EAAM,KAAK,EAAE,CACb"}